{% extends "templates/layout.html" %}
{% block content %}
<p>Bikes today: {{today}}</p>
<p>Bikes this hour: {{parcial}}</p>
<div id="histo" style="height:200px;"></div>

<svg width="960" height="500"></svg>


<script>

 var data = [
   { date: '2014-01-01', amount: 10 },
   { date: '2014-02-01', amount: 20 },
   { date: '2014-03-01', amount: 40 },
   { date: '2014-04-01', amount: 80 }
 ];

 var y = d3.scaleLinear()
           .domain([0, 80]) // $0 to $80
           .range([200, 0]); // Los pixeles reales. Desde 200 (lo más bajo en este caso) hasta 0 (lo más alto)

 y.domain(d3.extent(data, function(d) { return d.amount }));/* mejora, domain automatico */


 var x = d3.scaleTime()
           .domain([
             new Date(Date.parse('2014-01-01')),
             new Date(Date.parse('2014-04-01'))
           ])
           .range([0, 300]);
</script>

<div>
   <svg width="350" height="160">
      <!-- 60px x 10px margin -->
      <g class="layer" transform="translate(60,10)">
         <!-- cx = 270px * ($X / 3)
              ^      ^   ^
              width of graph  x-value max(x)

              cy = 120px - (($Y / 80) * 120px)
              ^       ^     ^       ^
              top of graph   y-value  max(y)  scale -->
         <circle r="5" cx="0"   cy="105" />
         <circle r="5" cx="90"  cy="90"  />
         <circle r="5" cx="180" cy="60"  />
         <circle r="5" cx="270" cy="0"   />

         <g class="y axis">
            <line x1="0" y1="0" x2="0" y2="120" />
            <text x="-40" y="105" dy="5">$10</text>
            <text x="-40" y="0"   dy="5">$80</text>
         </g>
         <g class="x axis" transform="translate(0, 120)">
            <line x1="0" y1="0" x2="270" y2="0" />
            <text x="-30"   y="20">January 2014</text>
            <text x="240" y="20">April</text>
         </g>
      </g>
   </svg>
</div>


{% endblock %}
